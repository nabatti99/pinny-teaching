# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Hosting on PR
on:
    push:
        branches:
            - main

permissions:
    checks: write
    contents: read

env:
    CI: false

jobs:
    deploy:
        name: My Job
        runs-on: ubuntu-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v4

            - name: Enable Corepack
              run: corepack enable

            - name: Set up Node.js
              uses: actions/setup-node@v4
              with:
                  node-version: "lts/Iron"
                  cache: "yarn"

            - name: Install libraries
              run: yarn

            - name: Build
              run: yarn build

            - name: Deploy to Firebase Hosting
              uses: FirebaseExtended/action-hosting-deploy@v0
              with:
                  repoToken: ${{ secrets.GITHUB_TOKEN }}
                  firebaseServiceAccount: ${{ secrets.FIREBASE_SERVICE_ACCOUNT_PINNY_TEACHING }}
                  projectId: pinny-teaching
                  channelId: live
